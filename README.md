# Союзлифт Аудит

Веб-приложение для проведения аудитов лифтовой инфраструктуры компании «Союзлифт». Репозиторий содержит серверную часть на Django, шаблоны пользовательского интерфейса и эксплуатационные материалы.

## Основные возможности

- личные кабинеты аудитора и администратора с разграничением прав;
- справочники зданий и лифтов с модерацией записей, созданных аудиторами;
- конструктор чек-листа с гибкими настройками обязательных полей и шкал оценок;
- проведение аудита с фотофиксацией, расчётом баллов и историей статусов;
- офлайн-режим с кэшированием справочников, локальным сохранением черновиков и последующей синхронизацией;
- экспорт результатов для печати и в табличные форматы.

Подробная архитектура описана в [architecture.md](architecture.md), а план реализации — в [AGENTS.md](AGENTS.md).

## Стек и зависимости

| Компонент | Используемые технологии |
|-----------|-------------------------|
| Backend   | Python 3.11, Django 5.x |
| База данных | SQLite (файл `backend/db/db.sqlite3`) |
| UI        | Django Templates, Tailwind CSS (предсобранный CSS), Alpine.js и HTMX по требованию |
| Тесты     | `pytest`, `pytest-django`, `factory-boy`, `ruff` |

Зависимости Python перечислены в [requirements.txt](requirements.txt). Tailwind настраивается через `tailwind.config.js` и исходник `backend/static/css/tailwind.src.css`.

## Структура репозитория

- `backend/` — Django-проект (`config`) и приложения `accounts`, `catalog`, `audits`, тесты и статика.
- `docs/` — дополнительная документация для разработчиков, эксплуатации и пользователей.
- `scripts/` — утилиты для резервного копирования, обслуживания и развёртывания.
- `deploy/` — конфигурации и шаблоны для серверной инфраструктуры.
- `architecture.md` — системное описание.
- `data.csv` — демонстрационный набор исходных данных.

## Быстрый старт (разработка)

1. Установите Python 3.11 и необходимые системные пакеты (см. [docs/development.md](docs/development.md)).
2. Создайте виртуальное окружение и активируйте его:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   ```
3. Установите зависимости: `pip install -r requirements.txt`.
4. Выполните миграции: `python manage.py migrate`.
5. Создайте суперпользователя: `python manage.py createsuperuser`.
6. Запустите сервер разработки: `python manage.py runserver`.

Переменные окружения по умолчанию настроены для профиля `dev`. Для переключения используйте `DJANGO_ENV` (`dev`, `test`, `prod`) и задайте секретный ключ в `DJANGO_SECRET_KEY` перед развёртыванием.

## Проверки качества

Перед коммитом или Pull Request выполните автоматические проверки:

```bash
python manage.py check
pytest
ruff check backend/
```

Дополнительные указания приведены в [docs/development.md](docs/development.md) и [docs/operations.md](docs/operations.md).

## Документация

- [docs/development.md](docs/development.md) — руководство разработчика.
- [docs/deployment.md](docs/deployment.md) — чек-листы развёртывания и настройки инфраструктуры.
- [docs/operations.md](docs/operations.md) — регламенты сопровождения и резервного копирования.
- [docs/user-guide.md](docs/user-guide.md) — инструкция для аудиторов и администраторов.
- [docs/ui-regression-checklist.md](docs/ui-regression-checklist.md) — контрольный список регрессионного тестирования интерфейса.

## Лицензия

Тип лицензии уточняется с заказчиком. До утверждения распространяется внутреннее соглашение компании «Союзлифт».
