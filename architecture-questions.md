# Вопросы по архитектурному описанию

1. **Service worker и HTTPS.** Для работы сервис-воркера требуется защищённый контекст (HTTPS). На «обычном хостинге» у нас гарантировано наличие TLS-сертификата или нужно предусмотреть альтернативный офлайн-механизм для площадок без HTTPS?
2. **Структура информационной формы.** В `Audit.object_info` предлагается хранить JSON/текст, но не указано, какие поля должны быть обязательными и где лежит их схема. Нужно ли жёстко фиксировать структуру формы или разрешаем администраторам конфигурировать поля?
3. **Импорт против ручного редактирования чек-листа.** Если администратор обновил вопросы через UI, а затем загрузил `data.csv`, какая операция считается источником истины? Требуется ли защита от перезаписи актуальных данных при повторном импорте?
4. **Версионирование вопросов.** В модели есть `QuestionVersion`, но не описано, когда оно создаётся и как показывается в интерфейсе. Нужна ли эта сущность в первой версии или достаточно хранить историю через `AuditLogEntry`?
5. **Ограничение доступа к аудиту.** Можно ли двум аудиторам одновременно редактировать один и тот же аудит (онлайн или офлайн)? Если да, как решаем конфликты при синхронизации? Если нет, нужна ли блокировка/назначение только одному исполнителю?
6. **Лимиты на фото.** Для офлайн-хранилища и сервера не оговорены ограничения по размеру файла и форматам фотографий. Нужно ли автоматически сжимать изображения перед синхронизацией, чтобы уложиться в квоты обычного хостинга?
7. **Переходы статусов аудита.** Список статусов задан, но не описаны правила переходов и роли (кто может переводить в `needs_revision` или `approved`). Требуется ли диаграмма состояний или достаточно базовой логики?
8. **Контроль количества комментариев/фото.** В `Audit` хранятся поля `comment_count` и `photo_count`. Они вычисляются динамически или сохраняются при каждой синхронизации? Нужно уточнить, чтобы избежать рассинхронизации данных.
9. **Обработка крупных пакетов синхронизации.** При отправке до 10 фото на каждый вопрос пакет может быть очень большим. Нужно ли реализовывать пофайловую синхронизацию или достаточно одной транзакции? Есть ли ограничения по времени отклика API?
10. **PDF-отчёты.** Планируется использовать `weasyprint`. Учитывая ограничения хостинга, уверены ли мы, что на выбранной площадке можно установить все зависимости (например, system packages для рендеринга PDF)?
