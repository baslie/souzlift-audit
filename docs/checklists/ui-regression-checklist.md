# Чек-лист регрессионного тестирования UI

Документ предназначен для визуальных проверок после изменений дизайн-системы и перед релизами. Основан на сценариях из [§6.2](../architecture/v2.md#62-%D0%BA%D0%B0%D0%B1%D0%B8%D0%BD%D0%B5%D1%82-%D0%B0%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%B0), [§6.3](../architecture/v2.md#63-%D0%BA%D0%B0%D0%B1%D0%B8%D0%BD%D0%B5%D1%82-%D0%B0%D1%83%D0%B4%D0%B8%D1%82%D0%BE%D1%80%D0%B0), [§8](../architecture/v2.md#8-%D0%BE%D1%84%D0%BB%D0%B0%D0%B9%D0%BD-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC-%D0%B8-%D1%81%D0%B8%D0%BD%D1%85%D1%80%D0%BE%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F) и [§10](../architecture/v2.md#10-%D0%BF%D0%BB%D0%B0%D0%BD-%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4%D0%B0).

## 1. Подготовка окружения

- [ ] Пересобран `backend/static/css/tailwind.min.css` согласно `tailwind.config.js`; проверено, что дата модификации файла актуальна.
- [ ] Выполнены автоматические тесты (`pytest`) и статические проверки при необходимости.
- [ ] DEV-сервер запущен командой `python backend/manage.py runserver` в режиме HTTPS (для тестирования сервис-воркера можно использовать `python -m http.server` за обратным прокси или `mkcert`).
- [ ] Браузер: Chrome ≥117 и Firefox ESR. Очистить кэши, сбросить сервис-воркер (`chrome://serviceworker-internals`).

## 2. Макет и навигация

- [ ] Проверить хедер (`.app-header`) и футер на страницах `accounts:dashboard`, `audits:audit-list`, `catalog:*`: логотип, слоган, отступы, цветовая схема.
- [ ] Убедиться, что контейнер центрирован на брейкпоинтах `sm`, `md`, `lg`, `xl`, `2xl`. Использовать DevTools Responsive Mode (ширины 360, 768, 1024, 1360 px).
- [ ] Проверить хлебные крошки/заголовки (`{% block heading %}`) на предмет сокращений текста и корректного переноса.
- [ ] Протестировать навигационные ссылки с вариантами `aria-current`, `aria-expanded` (боковые меню, раскрывающиеся панели).

## 3. Компоненты и состояния

- [ ] Кнопки `.btn--primary`, `.btn--secondary`, `.btn--ghost`, `.btn--danger`: hover, focus-visible, disabled. Сравнить с эталонными значениями в `tailwind.src.css`.
- [ ] Уведомления (`messages`, `.app-alert--*`): цвета текста/фона, иконки (если подключены), отступы.
- [ ] Карточки `.app-card` и списки (`grid`, `flex`) не перекрываются и не создают горизонтальный скролл.
- [ ] Таблицы и фильтры в `audits:audit-list`, `catalog:*`: выравнивание заголовков, состояния пустых таблиц, пагинация.

## 4. Формы и валидация

- [ ] Формы входа и смены пароля (`accounts:login`, `accounts:password_change_form`): поля выровнены, сообщения об ошибках используют `.form-error`.
- [ ] Основная форма аудита (`audits:offline_object_info`, `audits:offline_checklist`): обязательные поля подсвечиваются, подсказки `.form-help` читаемы.
- [ ] Проверить доступность: `Tab`-навигация, видимая рамка фокуса, наличие `aria-*` атрибутов на интерактивных элементах офлайн-портала.
- [ ] Загрузка файлов: превью, прогресс (если реализован), сообщения об ошибках размера/количества.

## 5. Офлайн-режим и синхронизация

- [ ] В DevTools перевести сеть в Offline, создать черновик аудита: интерфейс не рушится, отображается предупреждение об офлайн-режиме.
- [ ] Проверить очередь синхронизации (`data-sync-panel`): статусы `pending`, `error`, `success` визуализируются с нужными цветами.
- [ ] Подтвердить, что сервис-воркер регистрируется без ошибок, кэшируются основные ресурсы (`/`, `offline_checklist`, `offline_object_info`, CSS/JS).
- [ ] После восстановления сети убедиться, что уведомление об успешной синхронизации отображается и скрывается по сценарию.

## 6. Кабинет администратора и отчётность

- [ ] Раздел «Чек-лист»: списки категорий/секций/вопросов отображают корректный порядок, кнопки перемещения и предпросмотр работают без артефактов.
- [ ] Раздел «Аудиты»: фильтры по статусу/периоду, маркеры «просмотрено» и уведомления отображаются в актуальной цветовой схеме.
- [ ] Раздел «Справочники»: карточки и таблицы не искажаются на разных брейкпоинтах, отображаются статусы модерации.
- [ ] Печатный экспорт `audits:export_print`: проверить блоки заголовков, таблицы вопросов, отсутствие разрывов страниц в критичных местах.
- [ ] Экспорт в CSV/Excel (если доступен): убедиться, что кнопки и всплывающие уведомления используют актуальные цвета.

## 7. Доступность и производительность

- [ ] Проверить контрастность текста и кнопок с помощью DevTools (Lighthouse / Accessibility). Минимум WCAG AA.
- [ ] Выполнить быструю проверку Lighthouse Performance (>80) на ключевых страницах; фиксировать результаты в отчёте.
- [ ] Убедиться в отсутствии дублирующих ID и нарушений структуры заголовков (`h1` → `h2` → `h3`).

## 8. Пост-релизный мониторинг

- [ ] Настроить пользовательский smoke-чек: вход под аудитором, создание черновика, отправка синхронизации.
- [ ] В течение суток после релиза отслеживать ошибки фронтенда (консоль браузера) и обратную связь пользователей.
- [ ] При обнаружении регрессий обновить документ `ui-regressions-<date>.md` и приложить скриншоты (хранятся локально).

> **Важно:** скриншоты и другие бинарные артефакты не загружаются в репозиторий, но обязательны для хранения во внутреннем архиве QA.
